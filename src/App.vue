<script setup lang="ts">
import { useEditor, EditorContent } from '@tiptap/vue-3';
import StarterKit from '@tiptap/starter-kit';
import TextStyle from '@tiptap/extension-text-style';
import Color from '@tiptap/extension-color';
import ListItem from '@tiptap/extension-list-item';

const extensions = [
  Color.configure({ types: [TextStyle.name, ListItem.name] }),
  TextStyle.configure(),
  StarterKit.configure({
    bulletList: {
      keepMarks: true,
      keepAttributes: false,
    },
    orderedList: {
      keepMarks: true,
      keepAttributes: false,
    },
  }),
];

const content = `
<h2>
  ä½ å¥½ï¼Œ
</h2>
<p>
  è¿™æ˜¯ä¸€ä¸ª <em>åŸºç¡€çš„</em> <strong>tiptap</strong> ç¤ºä¾‹ã€‚å½“ç„¶ï¼Œè¿™é‡Œæœ‰ä½ æœŸæœ›ä»æ–‡æœ¬ç¼–è¾‘å™¨ä¸­çœ‹åˆ°çš„å„ç§åŸºæœ¬æ–‡æœ¬æ ·å¼ã€‚ä½†ç­‰ä½ çœ‹åˆ°åˆ—è¡¨å°±æ›´æƒŠå–œäº†ï¼š
</p>
<ul>
  <li>
    è¿™æ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸€é¡¹çš„é¡¹ç›®ç¬¦å·åˆ—è¡¨â€¦â€¦
  </li>
  <li>
    â€¦â€¦æˆ–è€…æœ‰ä¸¤é¡¹åˆ—è¡¨é¡¹ã€‚
  </li>
</ul>
<p>
  æ˜¯ä¸æ˜¯å¾ˆæ£’ï¼Ÿè€Œä¸”æ‰€æœ‰è¿™äº›éƒ½æ˜¯å¯ç¼–è¾‘çš„ã€‚ä½†ç­‰ç­‰ï¼Œè¿˜æœ‰æ›´å¤šã€‚è®©æˆ‘ä»¬è¯•è¯•ä»£ç å—ï¼š
</p>
<pre><code class="language-css">body {
  display: none;
}</code></pre>
<p>
  æˆ‘çŸ¥é“ï¼Œæˆ‘çŸ¥é“ï¼Œè¿™å¾ˆä»¤äººå°è±¡æ·±åˆ»ã€‚ä½†è¿™åªæ˜¯å†°å±±ä¸€è§’ã€‚è¯•è¯•çœ‹ï¼Œéšä¾¿ç‚¹å‡»ä¸€ä¸‹ã€‚åˆ«å¿˜äº†æŸ¥çœ‹å…¶ä»–ç¤ºä¾‹ã€‚
</p>
<blockquote>
  å“‡ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ã€‚å¹²å¾—å¥½ï¼Œå­©å­ï¼ğŸ‘
  <br />
  â€”â€” å¦ˆå¦ˆ
</blockquote>
`;

const editor = useEditor({
  extensions,
  content,
});
</script>

<template>
  <div>
    <div class="menu-bar" v-if="editor">
      <button
          @click="editor.chain().focus().toggleBold().run()"
          :disabled="!editor.can().chain().focus().toggleBold().run()"
          :class="{ 'is-active': editor.isActive('bold') }"
      >
        åŠ ç²—
      </button>
      <button
          @click="editor.chain().focus().toggleItalic().run()"
          :disabled="!editor.can().chain().focus().toggleItalic().run()"
          :class="{ 'is-active': editor.isActive('italic') }"
      >
        æ–œä½“
      </button>
      <button
          @click="editor.chain().focus().toggleStrike().run()"
          :disabled="!editor.can().chain().focus().toggleStrike().run()"
          :class="{ 'is-active': editor.isActive('strike') }"
      >
        åˆ é™¤çº¿
      </button>
      <button
          @click="editor.chain().focus().toggleCode().run()"
          :disabled="!editor.can().chain().focus().toggleCode().run()"
          :class="{ 'is-active': editor.isActive('code') }"
      >
        ä»£ç 
      </button>
      <button @click="editor.chain().focus().unsetAllMarks().run()">
        æ¸…é™¤æ ¼å¼
      </button>
      <button @click="editor.chain().focus().clearNodes().run()">
        æ¸…é™¤èŠ‚ç‚¹
      </button>
      <button
          @click="editor.chain().focus().setParagraph().run()"
          :class="{ 'is-active': editor.isActive('paragraph') }"
      >
        æ®µè½
      </button>
      <button
          @click="editor.chain().focus().toggleHeading({ level: 1 }).run()"
          :class="{ 'is-active': editor.isActive('heading', { level: 1 }) }"
      >
        æ ‡é¢˜1
      </button>
      <button
          @click="editor.chain().focus().toggleHeading({ level: 2 }).run()"
          :class="{ 'is-active': editor.isActive('heading', { level: 2 }) }"
      >
        æ ‡é¢˜2
      </button>
      <button
          @click="editor.chain().focus().toggleHeading({ level: 3 }).run()"
          :class="{ 'is-active': editor.isActive('heading', { level: 3 }) }"
      >
        æ ‡é¢˜3
      </button>
      <button
          @click="editor.chain().focus().toggleHeading({ level: 4 }).run()"
          :class="{ 'is-active': editor.isActive('heading', { level: 4 }) }"
      >
        æ ‡é¢˜4
      </button>
      <button
          @click="editor.chain().focus().toggleHeading({ level: 5 }).run()"
          :class="{ 'is-active': editor.isActive('heading', { level: 5 }) }"
      >
        æ ‡é¢˜5
      </button>
      <button
          @click="editor.chain().focus().toggleHeading({ level: 6 }).run()"
          :class="{ 'is-active': editor.isActive('heading', { level: 6 }) }"
      >
        æ ‡é¢˜6
      </button>
      <button
          @click="editor.chain().focus().toggleBulletList().run()"
          :class="{ 'is-active': editor.isActive('bulletList') }"
      >
        æ— åºåˆ—è¡¨
      </button>
      <button
          @click="editor.chain().focus().toggleOrderedList().run()"
          :class="{ 'is-active': editor.isActive('orderedList') }"
      >
        æœ‰åºåˆ—è¡¨
      </button>
      <button
          @click="editor.chain().focus().toggleCodeBlock().run()"
          :class="{ 'is-active': editor.isActive('codeBlock') }"
      >
        ä»£ç å—
      </button>
      <button
          @click="editor.chain().focus().toggleBlockquote().run()"
          :class="{ 'is-active': editor.isActive('blockquote') }"
      >
        å¼•ç”¨
      </button>
      <button @click="editor.chain().focus().setHorizontalRule().run()">
        æ°´å¹³çº¿
      </button>
      <button @click="editor.chain().focus().setHardBreak().run()">
        å¼ºåˆ¶æ¢è¡Œ
      </button>
      <button
          @click="editor.chain().focus().undo().run()"
          :disabled="!editor.can().chain().focus().undo().run()"
      >
        æ’¤é”€
      </button>
      <button
          @click="editor.chain().focus().redo().run()"
          :disabled="!editor.can().chain().focus().redo().run()"
      >
        é‡åš
      </button>
      <button
          @click="editor.chain().focus().setColor('#958DF1').run()"
          :class="{ 'is-active': editor.isActive({ color: '#958DF1' }) }"
      >
        ç´«è‰²
      </button>
    </div>
    <EditorContent :editor="editor" class="tiptap"/>
  </div>
</template>
